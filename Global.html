<!DOCTYPE HTML>
<html>
  <head>
  <title>global HTML page</title>
  <script type="text/javascript">
     
    // Only add leaf communities.
    var communities =
      {
      'user_tips_library_documents' : true,
      'older_hardware' : true,
      'using_apple_support_communities' : true,
      'developer_forums' : true,
      'ipad/using_ipad' : true,
      'ipad/ipad_in_business_and_education' : true,
      'iphone/using_iphone' : true,
      'iphone/iphone_hardware' : true,
      'iphone/iphone_in_business_and_education' : true,
      'iphone/accessories' : true,
      'ipod/ipod_touch' : true,
      'ipod/ipod_shuffle' : true,
      'ipod/ipod_nano' : true,
      'ipod/ipod_classic' : true,
      'ipod/apple_branded_ipod_accessories' : true,
      'ipod/older_ipods' : true,
      'itunes/itunes_for_windows' : true,
      'itunes/itunes_for_mac' : true,
      'itunes/itunes_match' : true,
      'itunes/itunes_store' : true,
      'itunes/home_sharing' : true,
      'itunes/producing_podcasts' : true,
      'desktop_computers/imac_intel' : true,
      'desktop_computers/mac_mini' : true,
      'desktop_computers/mac_pro' : true,
      'desktop_computers/power_mac' : true,
      'desktop_computers/imac_powerpc' : true,
      'desktop_computers/emac' : true,
      'ibooks/ibooks_store' : true,
      'ibooks/ibooks_for_ios' : true,
      'ibooks/ibooks_for_mac' : true,
      'app_store/iphoto_for_ios' : true,
      'app_store/imovie_for_ios' : true,
      'app_store/iwork_for_ios' : true,
      'app_store/garageband_for_ios' : true,
      'app_store/itunes_u_for_ios' : true,
      'app_store/podcasts_for_ios' : true,
      'mac_app_store/using_mac_apple_store' : true,
      'mac_app_store/facetime_for_mac' : true,
      'mac_os/os_x_yosemite' : true,
      'mac_os/os_x_mavericks' : true,
      'mac_os/os_x_mountain_lion' : true,
      'mac_os/mac_os_x_v10.7_lion' : true,
      'mac_os/mac_os_x_v10.6_snow_leopard' : true,
      'mac_os/mac_os_x_v10.5_leopard' : true,
      'mac_os/mac_os_x_v10.4_tiger' : true,
      'mac_os/mac_os_x_v10.3_and_earlier' : true,
      'mac_os/mac_os_x_technologies' : true,
      'mac_os/messages_beta' : true,
      'mac_os/classic_mac_os' : true,
      'mac_os/quicktime' : true,
      'mac_os/safari' : true,
      'mac_os/front_row' : true,
      'notebooks/macbook_pro' : true,
      'notebooks/macbook_air' : true,
      'notebooks/ibook' : true,
      'notebooks/macbook' : true,
      'notebooks/powerbook' : true,
      'ibooks_author/creating_books_for_ibooks_store' : true,
      'ibooks_author/ibooks_author' : true,
      'ibooks_author/creating_epubs' : true,
      'ibooks_author/sign-up___itunes_connect' : true,
      'ibooks_author/delivery' : true,
      'ilife/iphoto' : true,
      'ilife/imovie' : true,
      'ilife/garageband' : true,
      'ilife/iweb' : true,
      'ilife/idvd' : true,
      'iwork/keynote' : true,
      'iwork/pages' : true,
      'iwork/numbers' : true,
      'iwork/iwork_for_icloud_beta' : true,
      'professional_applications/aperture' : true,
      'professional_applications/compressor_4' : true,
      'professional_applications/final_cut_pro_x' : true,
      'professional_applications/final_cut_studio' : true,
      'professional_applications/final_cut_express_hd' : true,
      'professional_applications/final_cut_server' : true,
      'professional_applications/logic_express' : true,
      'professional_applications/logic_pro' : true,
      'professional_applications/logic_studio' : true,
      'professional_applications/mainstage' : true,
      'professional_applications/motion_5' : true,
      'professional_applications/other_pro_audio' : true,
      'professional_applications/other_pro_video' : true,
      'professional_applications/soundtrack' : true,
      'professional_applications/iad_producer' : true,
      'professional_applications/iad_workbench' : true,
      'accessibility/vision' : true,
      'accessibility/hearing' : true,
      'accessibility/physical_and_motor_skills' : true,
      'servers_enterprise_software/os_x_server' : true,
      'servers_enterprise_software/mac_os_x_lion_server' : true,
      'servers_enterprise_software/mac_os_x_server_v10.6_snow_leopard' : 
        true,
      'servers_enterprise_software/mac_os_x_server_v10.5_and_earlier' : 
        true,
      'servers_enterprise_software/mac_os_x_server_v10.4_and_earlier' : 
        true,
      'servers_enterprise_software/xsan' : true,
      'servers_enterprise_software/xserve_and_servers' : true,
      'servers_enterprise_software/apple_remote_desktop' : true,
      'servers_enterprise_software/webobjects' : true,
      'applications/appleworks' : true,
      'applications/ichat' : true,
      'applications/ical' : true,
      'peripherals/thunderbolt_display' : true,
      'peripherals/isight' : true,
      'peripherals/cinema_displays' : true,
      'peripherals/older_displays_and_monitors' : true,
      'peripherals/bluetooth' : true,
      'peripherals/magic_mouse_and_trackpad' : true,
      'appletv/appletv' : true,
      'icloud/icloud_on_my_ios_device' : true,
      'icloud/icloud_on_my_mac' : true,
      'icloud/icloud_on_my_pc' : true,
      'icloud/icloud.com' : true,
      'windows_software/boot_camp' : true,
      'windows_software/bonjour' : true,
      'windows_software/windows_compatibility' : true,
      'windows_software/software_update' : true,
      'wireless/airport' : true,
      'wireless/time_capsule' : true,
      'lounge/full_host_bar' : true,
      'lounge/water_cooler' : true,
      'lounge/community_operations' : true,
      'lounge/new_projects' : true,
      'itunes_u/itunes_u_course_manager' : true,
      'itunes_u/itunes_u_public_site_manager' : true,
      'older_software/legacy_networking' : true,
      'user_tips_library_documents/user_tip_discussions' : true,
      'apple_pay/setting_up_apple_pay' : true,
      'apple_pay/using_apple_pay_in_stores' : true,
      'apple_pay/using_apple_pay_within_apps' : true,
      'mac_os/photos_osx' : true
      };

    // Default relocate forums.
    var defaultRelocate = 
      {
      'iphone' : "iPhone", 
      'ipad' : "iPad", 
      'yosemite' : "Yosemite" };

    // Specific relocate forums.
    var forumSpecificRelocate =
      {
      'ipad/using_ipad' : { 'apple_pay' : "Apple Pay" },
      'iphone/using_iphone' : { 'apple_pay' : "Apple Pay" },
      'iphone/iphone_hardware' : { 'apple_pay' : "Apple Pay" },
      'iphone/accessories' : 
        { 
        'apple_pay' : "Apple Pay",
        'iphone_hardware' : 'iPhone hardware'
        },
      'ipod/ipod_touch' : { 'itunes' : "iTunes" },
      'ipod/ipod_shuffle' : { 'itunes' : "iTunes" },
      'ipod/ipod_nano' : { 'itunes' : "iTunes" },
      'ipod/ipod_classic' : { 'itunes' : "iTunes" },
      'ipod/older_ipods' : { 'itunes' : "iTunes" },
      'ibooks/ibooks_for_ios' : { 'ibooks_store' : "iBooks Store" },
      'ibooks/ibooks_for_mac' : { 'ibooks_store' : "iBooks Store" },
      'app_store/iphoto_for_ios' : { 'iphoto_osx' : "iPhoto for OS X" },
      'app_store/imovie_for_ios' : { 'imovie_osx' : "iMovie for OS X" },
      'app_store/iwork_for_ios' : 
        {
        'keynote_osx' : "Keynote for OS X", 
        'pages_osx' : "Pages for OS X", 
        'numbers_osx' : "Numbers for OS X"
        },
      'app_store/garageband_for_ios' : 
        { 'garageband_osx' : "GarageBand for OS X" },
      'app_store/itunes_u_for_ios' : { 'itunes' : "iTunes" },
      'notebooks/macbook_pro' : 
        { 'lion' : "Lion", 'snow_leopard' : "Snow Leopard"},
      'notebooks/ibook' : { 'classic_mac_os' : "Classic MacOS" },
      'notebooks/macbook' : 
        { 'lion' : "Lion", 'snow_leopard' : "Snow Leopard"},
      'notebooks/powerbook' : { 'classic_mac_os' : "Classic MacOS" },
      'ilife/iphoto' : 
        { 
        'photos_osx' : "Photos for OS X", 
        'iphoto_ios' : "iPhoto for iOS" 
        },
      'ilife/imovie' : { 'imovie_ios' : "iMovie for iOS" },
      'ilife/garageband' : { 'garageband_ios' : "GarageBand for iOS" },
      'iwork/keynote' : { 'iwork_ios' : "iWork for iOS" },
      'iwork/pages' : { 'iwork_ios' : "iWork for iOS" },
      'iwork/numbers' : { 'iwork_ios' : "iWork for iOS" },
      'applications/appleworks' : 
        {
        'yosemite' : "Yosemite",
        'mavericks' : "Mavericks", 
        'iwork_ios' : "iWork for iOS",
        'using_ipad' : "Using iPad",
        'using_iphone' : "Using iPhone",
        'keynote' : "Keynote", 
        'pages' : "Pages", 
        'numbers' : "Numbers",
        'icloud_on_my_ios_device' : "iCloud for my iOS device"
        },
      'applications/ichat' : { 'messages' : "Messages" },
      'itunes_u/itunes_u_course_manager' : { 'itunes' : "iTunes" },
      'itunes_u/itunes_u_public_site_manager' : { 'itunes' : "iTunes" },
      'mac_os/photos_osx' : 
        { 'iphoto' : "iPhoto", 'photos_ios' : "Photos for iOS" },
      'mac_os/os_x_yosemite' : { 'photos_osx' : "Photos for OS X" }
      };

    // settings.
    var settings = 
      {
      communities : communities,
      defaultRelocate : defaultRelocate,
      forumSpecificRelocate : forumSpecificRelocate,
      detectSpam : safari.extension.settings.detect_spam,
      respam : safari.extension.settings.spam,
      threadListFontSize : safari.extension.settings.thread_list_font_size,
      threadListFontColour : 
        safari.extension.settings.thread_list_font_colour,
      threadFontSize : safari.extension.settings.thread_font_size,
      threadFontColour : safari.extension.settings.thread_font_colour,
      hideAppleHeader : safari.extension.settings.hide_apple_header,
      version : safari.extension.settings.version
      };
        
    // Message Event Handler
    function messageHandler(event)
      {
      var page = safari.application.activeBrowserWindow.activeTab.page;
      
      if(event.name == 'getSettings')
        page.dispatchMessage('runASCPowerTools', settings);        
      }

    // Handle a change in settings.
    function settingChanged(event)
      {
      if(event.key == "detect_spam")
        settings.detectSpam = event.newValue;
      else if(event.key == "hide_apple_header")
        settings.hideAppleHeader = event.newValue;
      else if(event.key == "thread_list_font_size")
        settings.threadListFontSize = event.newValue;
      else if(event.key == "thread_list_font_colour")
        settings.threadListFontColour = event.newValue;
      else if(event.key == "thread_list_visited_font_colour")
        settings.threadListVisitedFontColour = event.newValue;
      else if(event.key == "thread_font_size")
        settings.threadFontSize = event.newValue;
      else if(event.key == "thread_font_colour")
        settings.threadFontColour = event.newValue;

      var page = safari.application.activeBrowserWindow.activeTab.page;

      localStorage.ASCPowerToolsSettings = JSON.stringify(settings);
      
      page.dispatchMessage('runASCPowerTools', settings);
      }
      
    // Don't include magic.
    if(settings.respam == "vashikaran|9815247710|9982822666|baba|magic")
      {
      settings.respam = "vashikaran|9815247710|9982822666|baba";
      safari.extension.settings.spam = settings.respam;
      }
      
    // Save my settings to local storage.
    localStorage.ASCPowerToolsSettings = JSON.stringify(settings);
    
    // Message Event Listener
    safari.application.addEventListener('message', messageHandler, false);

    // Listen for changes to settings.
    safari.extension.settings.addEventListener(
      "change", settingChanged, false);
  
  </script>
  </head>
  <body>
  </body>
</html>